CREATE database file_system

-- DROP TABLE public.permission_group;

CREATE TABLE public.permission_group (
	id bigserial NOT NULL,
	group_name varchar(255) NULL,
	CONSTRAINT permission_group_pkey PRIMARY KEY (id)
);


-- public.item definition

-- Drop table

-- DROP TABLE public.item;

CREATE TABLE public.item (
	id serial4 NOT NULL,
	"type" varchar(255) NOT NULL,
	"name" varchar(255) NOT NULL,
	group_id int8 NULL,
	CONSTRAINT item_pkey PRIMARY KEY (id),
	CONSTRAINT item_group_id_fkey FOREIGN KEY (group_id) REFERENCES public.permission_group(id)
);


-- public.permissions definition

-- Drop table

-- DROP TABLE public.permissions;

CREATE TABLE public.permissions (
	id bigserial NOT NULL,
	permission_level varchar(255) NOT NULL,
	user_email varchar(255) NOT NULL,
	group_id int8 NULL,
	CONSTRAINT permissions_pkey PRIMARY KEY (id),
	CONSTRAINT fkkpcue1t3ldvdnr5q3a63wkeyl FOREIGN KEY (group_id) REFERENCES public.permission_group(id)
);


-- public.file definition

-- Drop table

-- DROP TABLE public.file;

CREATE TABLE public.file (
	id serial4 NOT NULL,
	binary_content bytea NOT NULL,
	item_id int8 NULL,
	CONSTRAINT file_pkey PRIMARY KEY (id),
	CONSTRAINT file_item_id_fkey FOREIGN KEY (item_id) REFERENCES public.item(id)
);


--- Data Inserted by APIs
INSERT INTO public.permission_group (group_name) VALUES
	 ('Admin');

INSERT INTO public.permissions (permission_level,user_email,group_id) VALUES
	 ('VIEW','ahmed@gmail.com',1),
	 ('EDIT','ahmed@gmail.com',1);

INSERT INTO public.item ("type","name",group_id) VALUES
     	 ('Space','D:\New folder\assessment\resources\stc-assessments',1),
     	 ('Folder','D:\New folder\assessment\resources\stc-assessments\backend',1),
     	 ('File','D:\New folder\assessment\resources\stc-assessments\backend\assessment.pdf',1);

INSERT INTO public.file (binary_content,item_id) VALUES
	 (decode('255044462D312E340A25F6E4FCDF0A312030206F626A0A3C3C0A2F54797065202F436174616C6F670A2F56657273696F6E202F312E340A2F50616765732032203020520A3E3E0A656E646F626A0A322030206F626A0A3C3C0A2F54797065202F50616765730A2F4B696473205B33203020525D0A2F436F756E7420310A3E3E0A656E646F626A0A332030206F626A0A3C3C0A2F54797065202F506167650A2F4D65646961426F78205B302E3020302E30203631322E30203739322E305D0A2F506172656E742032203020520A2F436F6E74656E74732034203020520A2F5265736F75726365732035203020520A3E3E0A656E646F626A0A342030206F626A0A3C3C0A2F4C656E6774682038340A2F46696C746572202F466C6174654465636F64650A3E3E0A73747265616D0D0A789C730AE1323250303730500849E1D27733543034520849E3D2F048CDC9C9D75128C9C82C5600A24485E2C4DC829C5485C4E2E2D4E2E2DCD4BC128500173785E4FCBC12205B4F5321248BCB35840B00619A17450D0A656E6473747265616D0A656E646F626A0A352030206F626A0A3C3C0A2F466F6E742036203020520A3E3E0A656E646F626A0A362030206F626A0A3C3C0A2F46312037203020520A3E3E0A656E646F626A0A372030206F626A0A3C3C0A2F54797065202F466F6E740A2F53756274797065202F54797065310A2F42617365466F6E74202F48656C7665746963612D426F6C640A2F456E636F64696E67202F57696E416E7369456E636F64696E670A3E3E0A656E646F626A0A787265660A3020380A3030303030303030303020363535333520660D0A30303030303030303135203030303030206E0D0A30303030303030303738203030303030206E0D0A30303030303030313335203030303030206E0D0A30303030303030323437203030303030206E0D0A30303030303030343034203030303030206E0D0A30303030303030343337203030303030206E0D0A30303030303030343638203030303030206E0D0A747261696C65720A3C3C0A2F526F6F742031203020520A2F4944205B3C45324444383835423641463341334238374235433843433032343236394343383E203C45324444383835423641463341334238374235433843433032343236394343383E5D0A2F53697A6520380A3E3E0A7374617274787265660A3537300A2525454F460A','hex'),12);
